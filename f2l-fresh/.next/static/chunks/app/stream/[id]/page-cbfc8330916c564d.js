(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{285:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var a=t(5155);t(2115);var r=t(9708),l=t(2085),n=t(9434);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:s,variant:t,size:l,asChild:c=!1,...d}=e,o=c?r.DX:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,n.cn)(i({variant:t,size:l,className:s})),...d})}},3745:(e,s,t)=>{Promise.resolve().then(t.bind(t,5521))},5521:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>U});var a=t(5155),r=t(2115),l=t(6874),n=t.n(l),i=t(5339),c=t(7340),d=t(2138),o=t(6618),m=t(5487),x=t(1539),u=t(1284),h=t(6695),p=t(285),f=t(5501),g=t(6474),v=t(5196),j=t(7863),b=t(9434);function N(e){let{...s}=e;return(0,a.jsx)(f.bL,{"data-slot":"select",...s})}function w(e){let{...s}=e;return(0,a.jsx)(f.WT,{"data-slot":"select-value",...s})}function y(e){let{className:s,size:t="default",children:r,...l}=e;return(0,a.jsxs)(f.l9,{"data-slot":"select-trigger","data-size":t,className:(0,b.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...l,children:[r,(0,a.jsx)(f.In,{asChild:!0,children:(0,a.jsx)(g.A,{className:"size-4 opacity-50"})})]})}function k(e){let{className:s,children:t,position:r="popper",...l}=e;return(0,a.jsx)(f.ZL,{children:(0,a.jsxs)(f.UC,{"data-slot":"select-content",className:(0,b.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...l,children:[(0,a.jsx)(z,{}),(0,a.jsx)(f.LM,{className:(0,b.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(A,{})]})})}function _(e){let{className:s,children:t,...r}=e;return(0,a.jsxs)(f.q7,{"data-slot":"select-item",className:(0,b.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(f.VF,{children:(0,a.jsx)(v.A,{className:"size-4"})})}),(0,a.jsx)(f.p4,{children:t})]})}function z(e){let{className:s,...t}=e;return(0,a.jsx)(f.PP,{"data-slot":"select-scroll-up-button",className:(0,b.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(j.A,{className:"size-4"})})}function A(e){let{className:s,...t}=e;return(0,a.jsx)(f.wn,{"data-slot":"select-scroll-down-button",className:(0,b.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(g.A,{className:"size-4"})})}var E=t(8856),Z=t(9588),R=t(6671);function U(e){let{params:s}=e,[t,l]=(0,r.useState)(null),[f,g]=(0,r.useState)(null),[v,j]=(0,r.useState)(!0),[b,z]=(0,r.useState)(null),A=(0,r.useRef)(null),U=(0,r.useRef)(null);(0,r.useEffect)(()=>{W()},[s.id]),(0,r.useEffect)(()=>{t&&t.servers.length>0&&!f&&g(t.servers[0])},[t,f]),(0,r.useEffect)(()=>(f&&A.current&&L(f.url),()=>{U.current&&U.current.destroy()}),[f]);let W=async()=>{try{let e=await fetch("/api/streams/".concat(s.id));if(!e.ok)throw Error("Stream not found");let t=await e.json();l(t)}catch(e){console.error("Error fetching stream:",e),z("فشل في تحميل البث المباشر"),R.oR.error("فشل في تحميل البث المباشر")}finally{j(!1)}},L=e=>{if(A.current)if(U.current&&(U.current.destroy(),U.current=null),e.includes(".m3u8")&&Z.Ay.isSupported()){let s=new Z.Ay({enableWorker:!0,lowLatencyMode:!0});U.current=s,s.loadSource(e),s.attachMedia(A.current),s.on(Z.Ay.Events.MANIFEST_PARSED,()=>{var e;null==(e=A.current)||e.play().catch(console.error)}),s.on(Z.Ay.Events.ERROR,(e,s)=>{s.fatal&&(console.error("HLS error:",s),R.oR.error("حدث خطأ في البث المباشر"))})}else A.current.canPlayType("application/vnd.apple.mpegurl")?(A.current.src=e,A.current.addEventListener("loadedmetadata",()=>{var e;null==(e=A.current)||e.play().catch(console.error)})):(A.current.src=e,A.current.load())};if(v)return(0,a.jsx)("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",dir:"rtl",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)(E.E,{className:"h-96 w-full mb-6"}),(0,a.jsx)(E.E,{className:"h-8 w-1/3 mb-4"}),(0,a.jsx)(E.E,{className:"h-4 w-2/3"})]})});if(b||!t)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",dir:"rtl",children:(0,a.jsx)(h.Zp,{className:"max-w-md w-full mx-4",children:(0,a.jsxs)(h.Wu,{className:"pt-6 text-center",children:[(0,a.jsx)(i.A,{className:"h-16 w-16 mx-auto mb-4 text-red-500"}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"حدث خطأ"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:b||"لم يتم العثور على البث المباشر"}),(0,a.jsx)(n(),{href:"/",children:(0,a.jsxs)(p.$,{className:"gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),"العودة إلى الصفحة الرئيسية"]})})]})})});let S=t.ads.filter(e=>"stream-top"===e.position),P=t.ads.filter(e=>"stream-bottom"===e.position),B=t.ads.filter(e=>"stream-sidebar"===e.position);return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",dir:"rtl",children:[(0,a.jsx)("header",{className:"bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 sticky top-0 z-50 shadow-sm",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(n(),{href:"/",className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:"العودة"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-red-500 to-red-700 p-2 rounded-lg",children:(0,a.jsx)(o.A,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("h1",{className:"text-lg font-bold bg-gradient-to-r from-red-600 to-red-800 bg-clip-text text-transparent",children:"منصة البث المباشر"})]})]})})}),(0,a.jsxs)("main",{className:"flex-1 container mx-auto px-4 py-8",children:[S.length>0&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(e=>e.linkUrl?(0,a.jsx)("a",{href:e.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"block",children:(0,a.jsx)(h.Zp,{className:"overflow-hidden border-2 border-yellow-400",children:(0,a.jsx)(h.Wu,{className:"p-0",children:(0,a.jsx)("img",{src:e.imageUrl,alt:e.title||"إعلان",className:"w-full h-24 object-cover"})})})},e.id):(0,a.jsx)(h.Zp,{className:"overflow-hidden border-2 border-yellow-400",children:(0,a.jsx)(h.Wu,{className:"p-0",children:(0,a.jsx)("img",{src:e.imageUrl,alt:e.title||"إعلان",className:"w-full h-24 object-cover"})})},e.id))})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-3",children:[(0,a.jsxs)(h.Zp,{className:"overflow-hidden",children:[(0,a.jsx)(h.aR,{children:(0,a.jsx)(h.ZB,{className:"text-2xl text-slate-800 dark:text-slate-100",children:t.title})}),(0,a.jsxs)(h.Wu,{children:[t.servers.length>1&&(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"}),(0,a.jsxs)(N,{value:null==f?void 0:f.id,onValueChange:e=>{let s=null==t?void 0:t.servers.find(s=>s.id===e);s&&(g(s),R.oR.success("تم التبديل إلى ".concat(s.channelName||s.name)))},children:[(0,a.jsx)(y,{className:"w-full md:w-64",children:(0,a.jsx)(w,{placeholder:"اختر القناة"})}),(0,a.jsx)(k,{children:t.servers.map(e=>(0,a.jsx)(_,{value:e.id,className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.channelLogo&&(0,a.jsx)("img",{src:e.channelLogo,alt:e.channelName||e.name,className:"w-5 h-5 object-contain",onError:e=>{e.target.style.display="none"}}),(0,a.jsx)("span",{children:e.channelName||e.name})]})},e.id))})]}),(0,a.jsx)(x.A,{className:"h-5 w-5 text-yellow-500"})]}),(0,a.jsxs)("div",{className:"relative aspect-video bg-black rounded-lg overflow-hidden",children:[(0,a.jsx)("video",{ref:A,className:"w-full h-full",controls:!0,playsInline:!0,autoPlay:!0}),!f&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/90",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.A,{className:"h-16 w-16 mx-auto mb-4 text-slate-500"}),(0,a.jsx)("p",{className:"text-slate-400",children:"اختر قناة للبث"})]})})]}),f&&(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm text-slate-600 dark:text-slate-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[f.channelLogo&&(0,a.jsx)("img",{src:f.channelLogo,alt:f.channelName||f.name,className:"w-6 h-6 object-contain",onError:e=>{e.target.style.display="none"}}),(0,a.jsxs)("span",{children:["القناة الحالية: ",f.channelName||f.name]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{children:"متصل"})]})]})]})]}),t.description&&(0,a.jsxs)(h.Zp,{className:"mt-6 border-2 border-blue-200 dark:border-blue-900",children:[(0,a.jsx)(h.aR,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),(0,a.jsx)(h.ZB,{className:"text-xl text-slate-800 dark:text-slate-100",children:"وصف القناة"})]})}),(0,a.jsxs)(h.Wu,{children:[(0,a.jsx)("p",{className:"text-base text-slate-700 dark:text-slate-300 leading-relaxed whitespace-pre-wrap",children:t.description}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:(0,a.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[(0,a.jsx)("span",{className:"font-semibold",children:"القناة:"})," ",t.title]})})]})]}),P.length>0&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:P.map(e=>e.linkUrl?(0,a.jsx)("a",{href:e.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"block",children:(0,a.jsx)(h.Zp,{className:"overflow-hidden border-2 border-yellow-400",children:(0,a.jsx)(h.Wu,{className:"p-0",children:(0,a.jsx)("img",{src:e.imageUrl,alt:e.title||"إعلان",className:"w-full h-32 object-cover"})})})},e.id):(0,a.jsx)(h.Zp,{className:"overflow-hidden border-2 border-yellow-400",children:(0,a.jsx)(h.Wu,{className:"p-0",children:(0,a.jsx)("img",{src:e.imageUrl,alt:e.title||"إعلان",className:"w-full h-32 object-cover"})})},e.id))})})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)(h.Zp,{className:"sticky top-24",children:[(0,a.jsx)(h.aR,{children:(0,a.jsx)(h.ZB,{children:"إعلانات"})}),(0,a.jsx)(h.Wu,{className:"space-y-4",children:B.length>0?B.map(e=>e.linkUrl?(0,a.jsx)("a",{href:e.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"block",children:(0,a.jsx)("img",{src:e.imageUrl,alt:e.title||"إعلان",className:"w-full h-48 object-cover rounded-lg hover:opacity-80 transition-opacity"})},e.id):(0,a.jsx)("img",{src:e.imageUrl,alt:e.title||"إعلان",className:"w-full h-48 object-cover rounded-lg"},e.id)):(0,a.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,a.jsx)(o.A,{className:"h-12 w-12 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"لا توجد إعلانات"})]})})]})})]})]}),(0,a.jsx)("footer",{className:"bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 mt-auto",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-6 text-center text-slate-600 dark:text-slate-400",children:(0,a.jsx)("p",{children:"\xa9 2025 منصة البث المباشر. جميع الحقوق محفوظة."})})})]})}},6695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>i,Zp:()=>l,aR:()=>n});var a=t(5155);t(2115);var r=t(9434);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...t})}},8856:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var a=t(5155),r=t(9434);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"skeleton",className:(0,r.cn)("bg-accent animate-pulse rounded-md",s),...t})}},9434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(2596),r=t(9688);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}}},e=>{e.O(0,[910,598,671,688,874,662,441,964,358],()=>e(e.s=3745)),_N_E=e.O()}]);